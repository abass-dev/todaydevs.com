!function(t){t(window).on("load",function(){t("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["colormag-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initColorMagBackgroundControl()},initColorMagBackgroundControl:function(){var i=this,t=i.setting._value,e=i.container.find(".colormag-color-picker-alpha");!_.isUndefined(t["background-image"])&&""!==t["background-image"]||(i.container.find(".customize-control-content > .background-repeat").hide(),i.container.find(".customize-control-content > .background-position").hide(),i.container.find(".customize-control-content > .background-size").hide(),i.container.find(".customize-control-content > .background-attachment").hide()),e.wpColorPicker({change:function(){jQuery("html").hasClass("colorpicker-ready")&&setTimeout(function(){i.saveValue("background-color",e.val())},100)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&i.saveValue("background-color","")}}),i.container.on("click",".background-image-upload-button, .thumbnail-image img",function(t){var o=wp.media({multiple:!1}).open().on("select",function(){var t,e=o.state().get("selection").first(),n=e.toJSON().sizes.full.url;_.isUndefined(e.toJSON().sizes.medium)?_.isUndefined(e.toJSON().sizes.thumbnail)||(n=e.toJSON().sizes.thumbnail.url):n=e.toJSON().sizes.medium.url,t=e.toJSON().sizes.full.url,e.toJSON().id,e.toJSON().width,e.toJSON().height,""!==t&&i.container.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),i.saveValue("background-image",t),e=i.container.find(".placeholder, .thumbnail"),t=i.container.find(".background-image-upload-remove-button"),e.length&&e.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+n+'" alt="" />'),t.length&&t.show()});t.preventDefault()}),i.container.on("click",".background-image-upload-remove-button",function(t){var e;t.preventDefault(),i.saveValue("background-image",""),e=i.container.find(".placeholder, .thumbnail"),t=i.container.find(".background-image-upload-remove-button"),i.container.find(".customize-control-content > .background-repeat").hide(),i.container.find(".customize-control-content > .background-position").hide(),i.container.find(".customize-control-content > .background-size").hide(),i.container.find(".customize-control-content > .background-attachment").hide(),e.length&&e.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),t.length&&t.hide()}),i.container.on("change",".background-repeat select",function(){i.saveValue("background-repeat",jQuery(this).val())}),i.container.on("change",".background-position select",function(){i.saveValue("background-position",jQuery(this).val())}),i.container.on("change",".background-size select",function(){i.saveValue("background-size",jQuery(this).val())}),i.container.on("change",".background-attachment select",function(){i.saveValue("background-attachment",jQuery(this).val())})},saveValue:function(t,e){var n=this,o=jQuery("#customize-control-"+n.id.replace("[","-").replace("]","")+" .background-hidden-value"),i=n.setting._value;i[t]=e,jQuery(o).attr("value",JSON.stringify(i)).trigger("change"),n.setting.set(i)}})}(jQuery),wp.customize.controlConstructor["colormag-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),function(t){t(window).on("load",function(){t("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["colormag-color"]=wp.customize.Control.extend({ready:function(){"use strict";var n=this;this.container.find(".colormag-color-picker-alpha").wpColorPicker({change:function(t,e){e=e.color.toString();jQuery("html").hasClass("colorpicker-ready")&&n.setting.set(e)}})}})}(jQuery),wp.customize.controlConstructor["colormag-dimensions"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;t.container.on("change keyup paste input",".top input",function(){t.updateTop()}),t.container.on("change keyup paste input",".right input",function(){t.updateRight()}),t.container.on("change keyup paste input",".left input",function(){t.updateLeft()}),t.container.on("change keyup paste input",".bottom input",function(){t.updateBottom()})},updateTop:function(){var t=this,e=t.setting._value,n=t.container.find(".dimensions-hidden-value"),o={top:{}};t.container.find(".top .input-wrapper").each(function(){var t=jQuery(this).find("input").val();o.top=t}),jQuery.extend(e,o),jQuery(n).attr("value",JSON.stringify(e)).trigger("change"),t.setting.set(e)},updateRight:function(){var t=this,e=t.setting._value,n=t.container.find(".dimensions-hidden-value"),o={right:{}};t.container.find(".right .input-wrapper").each(function(){var t=jQuery(this).find("input").val();o.right=t}),jQuery.extend(e,o),jQuery(n).attr("value",JSON.stringify(e)).trigger("change"),t.setting.set(e)},updateBottom:function(){var t=this,e=t.setting._value,n=t.container.find(".dimensions-hidden-value"),o={bottom:{}};t.container.find(".bottom .input-wrapper").each(function(){var t=jQuery(this).find("input").val();o.bottom=t}),jQuery.extend(e,o),jQuery(n).attr("value",JSON.stringify(e)).trigger("change"),t.setting.set(e)},updateLeft:function(){var t=this,e=t.setting._value,n=t.container.find(".dimensions-hidden-value"),o={left:{}};t.container.find(".left .input-wrapper").each(function(){var t=jQuery(this).find("input").val();o.left=t}),jQuery.extend(e,o),jQuery(n).attr("value",JSON.stringify(e)).trigger("change"),t.setting.set(e)}}),wp.customize.controlConstructor["colormag-dropdown-categories"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("change","select",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var t="editor_"+this.id;wp.editor.initialize(t,{tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0})},onChangeActive:function(t,e){"use strict";var n=this,o="editor_"+n.id,i=n.container.find("textarea"),a=tinyMCE.get(o);a&&a.onChange.add(function(t){t.save(),t=a.getContent(),i.val(t).trigger("change"),wp.customize.instance(n.id).set(t)})}}),function(u){wp.customize.controlConstructor["colormag-group"]=wp.customize.Control.extend({ready:function(){"use strict";this.registerToggleEvents(),this.container.on("colormag_settings_changed",this.onOptionChange)},registerToggleEvents:function(){var a=this;u(".wp-full-overlay-sidebar-content").click(function(t){u(t.target).closest(".colormag-field-settings-modal").length||u(".colormag-group-toggle-icon.open").trigger("click")}),a.container.on("click",".colormag-group-wrap .colormag-group-toggle-icon",function(t){t.preventDefault(),t.stopPropagation();var e=u(this),n=e.closest(".customize-control-colormag-group"),o=n.find(".colormag-field-settings-modal").data("loaded"),i=n.parents(".control-section");e.hasClass("open")?n.find(".colormag-field-settings-modal").hide():(0<(t=i.find(".colormag-group-toggle-icon.open")).length&&t.trigger("click"),o?n.find(".colormag-field-settings-modal").show():(i=a.params.colormag_fields,t=u(ColorMagCustomizerControlGroup.group_modal_tmpl),o=u("#customize-footer-actions .active").attr("data-device"),n.find(".colormag-field-settings-wrap").append(t),n.find(".colormag-fields-wrap").attr("data-control",a.params.name),a.colormag_render_field(n,i,a),n.find(".colormag-field-settings-modal").show(),"mobile"===o?(u(".control-wrap.mobile").addClass("active"),u(".responsive-switchers .preview-mobile").addClass("active"),u(".control-wrap.tablet, .control-wrap.desktop").removeClass("active"),u(".responsive-switchers .preview-tablet, .responsive-switchers .preview-desktop").removeClass("active")):"tablet"===o?(u(".control-wrap.tablet").addClass("active"),u(".responsive-switchers .preview-tablet").addClass("active"),u(".control-wrap.mobile, .control-wrap.desktop").removeClass("active"),u(".responsive-switchers .preview-mobile, .responsive-switchers .preview-desktop").removeClass("active")):(u(".control-wrap.desktop").addClass("active"),u(".responsive-switchers .preview-desktop").addClass("active"),u(".control-wrap.mobile, .control-wrap.tablet").removeClass("active"),u(".responsive-switchers .preview-mobile, .responsive-switchers .preview-tablet").removeClass("active")))),e.toggleClass("open")}),a.container.on("click",".colormag-group-wrap > .customizer-text",function(t){t.preventDefault(),t.stopPropagation(),u(this).find(".colormag-group-toggle-icon").trigger("click")})},colormag_render_field:function(t,e,n){var o,i=this,a=t.find(".colormag-fields-wrap"),r="",c=[],s=i.isJSONString(n.params.value)?JSON.parse(n.params.value):{};void 0!==e.tabs?(o=0,r+='<div id="'+n.params.name+'-tabs" class="colormag-group-tabs">',r+='<ul class="colormag-group-list">',_.each(e.tabs,function(t,e){r+='<li class="'+(0===o?"active":"")+'"><a href="#tab-'+e.replace(" ","-")+'"><span>'+e+"</span></a></li>",o++}),r+="</ul>",r+='<div class="colormag-tab-content" >',_.each(e.tabs,function(t,e){t=i.generateFieldHtml(t,s);r+='<div id="tab-'+e.replace(" ","-")+'" class="tab">',r+=t.html,_.each(t.controls,function(t,e){c.push({key:t.key,value:t.value,name:t.name})}),r+="</div>"}),r+="</div>",r+="</div>",a.html(r),u("#"+n.params.name+"-tabs").tabs()):(e=i.generateFieldHtml(e,s),r+=e.html,_.each(e.controls,function(t,e){c.push({key:t.key,value:t.value,name:t.name})}),a.html(r)),_.each(c,function(t,e){switch(t.key){case"colormag-color":i.initColorControl(a,n,t.name);break;case"colormag-background":i.initBackgroundControl(n,t,t.name);break;case"colormag-typography":i.initTypographyControl(n,t,t.name)}}),t.find(".colormag-field-settings-modal").data("loaded",!0)},isJSONString:function(t){try{JSON.parse(t)}catch(t){return!1}return!0},generateFieldHtml:function(t,e){var c="",s=[];_.each(t,function(t,e){var n=wp.customize.control(t.name)?wp.customize.control(t.name).params.value:"",o=t.control,i="customize-control-"+o+"-content",i=wp.template(i),n=n||t.default,a="",r="";t.value=n,t.title=t.label,_.each(t.data_attrs,function(t,e){a+=" data-"+e+' ="'+t+'"'}),_.each(t.input_attrs,function(t,e){r+=e+' ="'+t+'"'}),t.dataAttrs=a,t.inputAttrs=r,s.push({key:o,value:n,name:t.name});o="",n=["colormag-typography"];"colormag-typography"===t.control&&n.includes(t.control)&&(t.languages=ColorMagCustomizerControlTypographySubsets),n.includes(t.control)&&(o="has-responsive-switchers"),c+='<li id="customize-control-'+t.name+'" class="customize-control '+o+" customize-control-"+t.control+'" >',c+=i(t),c+="</li>"});t=new Object;return t.controls=s,t.html=c,t},onOptionChange:function(t,e,n,o,i){u(".hidden-field-"+i).val(o),wp.customize.control(i).setting.set(o)},initColorControl:function(t,e,n){var o=this;t.find(".customize-control-colormag-color .colormag-color-picker-alpha").wpColorPicker({change:function(t,e){void 0===t.originalEvent&&void 0===e.color._alpha||(t=u(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0],n=(n=u(t).parents(".customize-control").attr("id")).replace("customize-control-",""),u(t).val(e.color.toString()),o.container.trigger("colormag_settings_changed",[o,u(t),e.color.toString(),n]))},clear:function(t){t=u(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];n=(n=u(t).parents(".customize-control").attr("id")).replace("customize-control-",""),u(t).val(""),o.container.trigger("colormag_settings_changed",[o,u(t),"",n]),wp.customize.previewer.refresh()}})},initBackgroundControl:function(a,t,r){var e=u("#customize-control-"+a.id.replace("[","-").replace("]","")+" .background-hidden-value"),e=JSON.parse(e.val()),t=t.name,n=a.container.find(".colormag-color-picker-alpha"),c=a.container.find("#customize-control-"+t);!_.isUndefined(e["background-image"])&&""!==e["background-image"]||(c.find(".customize-control-content > .background-repeat").hide(),c.find(".customize-control-content > .background-position").hide(),c.find(".customize-control-content > .background-size").hide(),c.find(".customize-control-content > .background-attachment").hide()),n.wpColorPicker({change:function(){var t;u("html").hasClass("colorpicker-ready")&&(t=u(this),setTimeout(function(){a.saveBackgroundValue("background-color",n.val(),t,r)},100))},clear:function(t){t=u(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];t&&a.saveBackgroundValue("background-color","",u(t),r),wp.customize.previewer.refresh()}}),c.on("click",".background-image-upload-button, .thumbnail-image img",function(t){var o=u(this),i=wp.media({multiple:!1}).open().on("select",function(){var t,e=i.state().get("selection").first(),n=e.toJSON().sizes.full.url;_.isUndefined(e.toJSON().sizes.medium)?_.isUndefined(e.toJSON().sizes.thumbnail)||(n=e.toJSON().sizes.thumbnail.url):n=e.toJSON().sizes.medium.url,t=e.toJSON().sizes.full.url,e.toJSON().id,e.toJSON().width,e.toJSON().height,""!==t&&c.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),a.saveBackgroundValue("background-image",t,o,r),e=c.find(".placeholder, .thumbnail"),t=c.find(".background-image-upload-remove-button"),e.length&&e.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+n+'" alt="" />'),t.length&&t.show()});t.preventDefault()}),c.on("click",".background-image-upload-remove-button",function(t){var e;t.preventDefault(),a.saveBackgroundValue("background-image","",u(this)),e=c.find(".placeholder, .thumbnail"),t=c.find(".background-image-upload-remove-button"),c.find(".customize-control-content > .background-repeat").hide(),c.find(".customize-control-content > .background-position").hide(),c.find(".customize-control-content > .background-size").hide(),c.find(".customize-control-content > .background-attachment").hide(),e.length&&e.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),t.length&&t.hide()}),c.on("change",".background-repeat select",function(){a.saveBackgroundValue("background-repeat",u(this).val(),u(this),r)}),c.on("change",".background-position select",function(){a.saveBackgroundValue("background-position",u(this).val(),u(this),r)}),c.on("change",".background-size select",function(){a.saveBackgroundValue("background-size",u(this).val(),u(this),r)}),c.on("change",".background-attachment select",function(){a.saveBackgroundValue("background-attachment",u(this).val(),u(this),r)})},saveBackgroundValue:function(t,e,n,o){var i=u("#customize-control-"+this.id.replace("[","-").replace("]","")+" .background-hidden-value"),a=JSON.parse(i.val());a[t]=e,u(i).attr("value",JSON.stringify(a)).trigger("change"),o=(o=u(n).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,n,a,o])},initTypographyControl:function(t,e,n){t.setting._value;var o=e.name,o=t.container.find("#customize-control-"+o);t.renderTypographyFontSelector(u(this),n,e),t.renderTypographyVariantSelector(u(this),n,e),t.renderTypographySubsetSelector(u(this),n,e),o.on("change",".font-style select",function(){t.saveTypographyValue("font-style",u(this).val(),u(this),n)}),o.on("change",".text-transform select",function(){t.saveTypographyValue("text-transform",u(this).val(),u(this),n)}),o.on("change",".text-decoration select",function(){t.saveTypographyValue("text-decoration",u(this).val(),u(this),n)}),o.on("change keyup paste input",".font-size input",function(){t.saveTypographyFontSize(u(this),n,e)}),o.on("change keyup paste input",".line-height input",function(){t.saveTypographyLineHeight(u(this),n,e)}),o.on("change keyup paste input",".letter-spacing input",function(){t.saveTypographyLetterSpacing(u(this),n,e)})},renderTypographyFontSelector:function(t,e,n){var o=this,i=o.selector+" .font-family select",a=[],r=[],c=[],s=u("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),l=JSON.parse(s.val()),s=o.getTypographyFonts();_.isUndefined(s.standard)||_.each(s.standard,function(t){a.push({id:t.family.replace(/&quot;/g,"&#39"),text:t.label})}),_.isUndefined(s.google)||_.each(s.google,function(t){r.push({id:t.family,text:t.label})}),data=[{text:s.standardfontslabel,children:a},{text:s.googlefontslabel,children:r}],_.isUndefined(s.custom)||(_.each(s.custom,function(t){c.push({id:t.family,text:t.label})}),data.push({text:s.customfontslabel,children:c})),i=u(i).selectWoo({data:data,width:"100%"}),l["font-family"]&&i.val(l["font-family"].replace(/'/g,'"')).trigger("change"),i.on("change",function(){o.saveTypographyValue("font-family",u(this).val(),u(this),e),o.renderTypographyVariantSelector(u(this),e,n),o.renderTypographySubsetSelector(u(this),e,n)})},getTypographyFonts:function(){return _.isUndefined(ColorMagCustomizerControlTypography)?{google:[],standard:[]}:ColorMagCustomizerControlTypography},renderTypographyVariantSelector:function(t,e,n){var o=this,i=u("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),a=JSON.parse(i.val()),r=a["font-family"],i=o.getTypographyVariants(r),r=o.selector+" .font-weight select",c=[],s=!1;!1!==i?(u(o.selector+" .font-weight").show(),_.each(i,function(t){a["font-weight"]===t.id&&(s=!0),c.push({id:t.id,text:t.label})}),s||(a["font-weight"]="regular"),u(r).hasClass("select2-hidden-accessible")&&(u(r).selectWoo("destroy"),u(r).empty()),(r=u(r).selectWoo({data:c,width:"100%"})).val(a["font-weight"]).trigger("change"),r.on("change",function(){o.saveTypographyValue("font-weight",u(this).val(),u(this),e)})):u(o.selector+" .font-weight").hide()},getTypographyVariants:function(e){var t=this.getTypographyFonts(),n=!1;return _.each(t.standard,function(t){if(e&&t.family===e.replace(/'/g,'"'))return n=t.variants}),_.each(t.google,function(t){if(t.family===e)return n=t.variants}),_.isUndefined(t.custom)||_.each(t.custom,function(t){if(t.custom===e)return n=t.variants}),n},renderTypographySubsetSelector:function(t,e,n){var o=this,i=u("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),a=JSON.parse(i.val()),r=a["font-family"],i=o.getTypographySubsets(r),r=o.selector+" .subsets select",c=[],s=a.subsets;!1!==i?(u(o.selector+" .subsets").show(),_.each(i,function(e){_.isObject(s)&&-1===s.indexOf(e.id)&&(s=_.reject(s,function(t){return t===e.id})),c.push({id:e.id,text:e.label})})):u(o.selector+" .subsets").hide(),u(r).hasClass("select2-hidden-accessible")&&(u(r).selectWoo("destroy"),u(r).empty()),(r=u(r).selectWoo({data:c,width:"100%"})).val(s).trigger("change"),r.on("change",function(){o.saveTypographyValue("subsets",u(this).val(),u(this),e)})},getTypographySubsets:function(e){var n=!1,t=this.getTypographyFonts();return _.each(t.google,function(t){if(t.family===e)return n=t.subsets}),n},saveTypographyFontSize:function(t,e,n){var o=u("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),i=JSON.parse(o.val()),n=n.name,n=this.container.find("#customize-control-"+n),a={"font-size":{}};n.find(".font-size .control-wrap").each(function(){var t=u(this).find("input").val(),e=u(this).find("input").data("device");a["font-size"][e]=t}),u.extend(i,a),u(o).attr("value",JSON.stringify(i)).trigger("change"),e=(e=u(t).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,t,i,e])},saveTypographyLineHeight:function(t,e,n){var o=u("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),i=JSON.parse(o.val()),n=n.name,n=this.container.find("#customize-control-"+n),a={"line-height":{}};n.find(".line-height .control-wrap").each(function(){var t=u(this).find("input").val(),e=u(this).find("input").data("device");a["line-height"][e]=t}),u.extend(i,a),u(o).attr("value",JSON.stringify(i)).trigger("change"),e=(e=u(t).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,t,i,e])},saveTypographyLetterSpacing:function(t,e,n){var o=u("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),i=JSON.parse(o.val()),n=n.name,n=this.container.find("#customize-control-"+n),a={"letter-spacing":{}};n.find(".letter-spacing .control-wrap").each(function(){var t=u(this).find("input").val(),e=u(this).find("input").data("device");a["letter-spacing"][e]=t}),u.extend(i,a),u(o).attr("value",JSON.stringify(i)).trigger("change"),e=(e=u(t).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,t,i,e])},saveTypographyValue:function(t,e,n,o){var i=u("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),a=JSON.parse(i.val());a[t]=e,u(i).attr("value",JSON.stringify(a)).trigger("change"),o=(o=u(n).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,n,a,o])}})}(jQuery),function(r){wp.customize.controlConstructor["colormag-fontawesome"]=wp.customize.Control.extend({ready:function(){"use strict";this.initColorMagFontawesomeControl()},initColorMagFontawesomeControl:function(){var t=this,e=t.selector,n=r(e).find("select"),o=[],i=t.setting._value,e=window["ColorMagCustomizerControlFontawesome"+this.id],a=0;r.each(e,function(t,e){o[a]={id:e,text:e},a++}),(e=n.selectWoo({data:o,width:"100%",templateResult:function(t){return t.id?r('<span><i class="fa fa-lg '+t.text+'"></i> '+t.text+"</span>"):t.text}})).val(i).trigger("change"),e.on("change",function(){t.setting.set(n.val())})}})}(jQuery),function(e){e(window).on("load",function(){e(".tg-navigate a").on("click",function(t){t.preventDefault();t=e(this).data("section");t&&wp.customize.section(t).focus()})})}(jQuery),wp.customize.controlConstructor["colormag-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-slider"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.find("input[type=range]").on("input change",function(){var t=jQuery(this).val(),e=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .value");e.val(t),e.change()}),this.container.find(".colormag-slider-reset").click(function(){var t=jQuery(this).closest(".slider-wrapper"),e=t.find("input[type=range]"),n=t.find(".colormag-range-value .value"),t=e.data("reset_value");e.val(t),n.val(t),n.change()}),this.container.on("input change","input[type=number]",function(){var t=jQuery(this).val();jQuery(this).closest(".slider-wrapper").find("input[type=range]").val(t),e.setting.set(t)})}}),wp.customize.controlConstructor["colormag-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;t.sortableContainer=t.container.find("ul.sortable").first(),t.unsortableContainer=t.container.find("ul.unsortable").first(),t.unsortableContainer.find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){t.updateValue()}),t.sortableContainer.sortable({stop:function(){t.updateValue()}}).disableSelection().find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){t.updateValue()})},updateValue:function(){"use strict";var t,e=[],n=[];this.sortableContainer.find("li").each(function(){jQuery(this).is(".invisible")||e.push(jQuery(this).data("value"))}),this.unsortableContainer.find("li").each(function(t){jQuery(this).is(".invisible")||n.push(jQuery(this).data("value"))}),t=n.concat(e),this.setting.set(t)}}),wp.customize.controlConstructor["colormag-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.setting._value;this.container.on("change","input",function(){e=!!jQuery(this).is(":checked"),t.setting.set(e)})}}),wp.customize.controlConstructor["colormag-typography"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;t.renderFontSelector(),t.renderVariantSelector(),t.renderSubsetSelector(),t.container.on("change",".font-style select",function(){t.saveValue("font-style",jQuery(this).val())}),t.container.on("change",".text-transform select",function(){t.saveValue("text-transform",jQuery(this).val())}),t.container.on("change",".text-decoration select",function(){t.saveValue("text-decoration",jQuery(this).val())}),t.container.on("change keyup paste input",".font-size input",function(){t.updateFontSize()}),t.container.on("change keyup paste input",".line-height input",function(){t.updateLineHeight()}),t.container.on("change keyup paste input",".letter-spacing input",function(){t.updateLetterSpacing()})},renderFontSelector:function(){var t=this,e=t.selector+" .font-family select",n=[],o=[],i=[],a=t.setting._value,r=t.getFonts();_.isUndefined(r.standard)||_.each(r.standard,function(t){n.push({id:t.family.replace(/&quot;/g,"&#39"),text:t.label})}),_.isUndefined(r.google)||_.each(r.google,function(t){o.push({id:t.family,text:t.label})}),data=[{text:r.standardfontslabel,children:n},{text:r.googlefontslabel,children:o}],_.isUndefined(r.custom)||(_.each(r.custom,function(t){i.push({id:t.family,text:t.label})}),data.push({text:r.customfontslabel,children:i})),e=jQuery(e).selectWoo({data:data,width:"100%"}),a["font-family"]&&e.val(a["font-family"].replace(/'/g,'"')).trigger("change"),e.on("change",function(){t.saveValue("font-family",jQuery(this).val()),t.renderVariantSelector(),t.renderSubsetSelector()})},getFonts:function(){return _.isUndefined(ColorMagCustomizerControlTypography)?{google:[],standard:[]}:ColorMagCustomizerControlTypography},renderVariantSelector:function(){var t=this,e=t.setting._value,n=e["font-family"],o=t.getVariants(n),n=t.selector+" .font-weight select",i=[],a=!1;!1!==o?(jQuery(t.selector+" .font-weight").show(),_.each(o,function(t){e["font-weight"]===t.id&&(a=!0),i.push({id:t.id,text:t.label})}),a||(e["font-weight"]="regular"),jQuery(n).hasClass("select2-hidden-accessible")&&(jQuery(n).selectWoo("destroy"),jQuery(n).empty()),(n=jQuery(n).selectWoo({data:i,width:"100%"})).val(e["font-weight"]).trigger("change"),n.on("change",function(){t.saveValue("font-weight",jQuery(this).val())})):jQuery(t.selector+" .font-weight").hide()},getVariants:function(e){var t=this.getFonts(),n=!1;return _.each(t.standard,function(t){if(e&&t.family===e.replace(/'/g,'"'))return n=t.variants}),_.each(t.google,function(t){if(t.family===e)return n=t.variants}),_.isUndefined(t.custom)||_.each(t.custom,function(t){if(t.custom===e)return n=t.variants}),n},renderSubsetSelector:function(){var t=this,e=t.setting._value,n=e["font-family"],o=t.getSubsets(n),n=t.selector+" .subsets select",i=[],a=e.subsets;!1!==o?(jQuery(t.selector+" .subsets").show(),_.each(o,function(e){_.isObject(a)&&-1===a.indexOf(e.id)&&(a=_.reject(a,function(t){return t===e.id})),i.push({id:e.id,text:e.label})})):jQuery(t.selector+" .subsets").hide(),jQuery(n).hasClass("select2-hidden-accessible")&&(jQuery(n).selectWoo("destroy"),jQuery(n).empty()),(n=jQuery(n).selectWoo({data:i,width:"100%"})).val(a).trigger("change"),n.on("change",function(){t.saveValue("subsets",jQuery(this).val())})},getSubsets:function(e){var n=!1,t=this.getFonts();return _.each(t.google,function(t){if(t.family===e)return n=t.subsets}),n},saveValue:function(t,e){var n=this.container.find(".typography-hidden-value"),o=this.setting._value;o[t]=e,jQuery(n).attr("value",JSON.stringify(o)).trigger("change"),this.setting.set(o)},updateFontSize:function(){var t=this.setting._value,e=this.container.find(".typography-hidden-value"),n={"font-size":{}};this.container.find(".font-size .control-wrap").each(function(){var t=jQuery(this).find("input").val(),e=jQuery(this).find("input").data("device");n["font-size"][e]=t}),jQuery.extend(t,n),jQuery(e).attr("value",JSON.stringify(t)).trigger("change"),this.setting.set(t)},updateLineHeight:function(){var t=this.setting._value,e=this.container.find(".typography-hidden-value"),n={"line-height":{}};this.container.find(".line-height .control-wrap").each(function(){var t=jQuery(this).find("input").val(),e=jQuery(this).find("input").data("device");n["line-height"][e]=t}),jQuery.extend(t,n),jQuery(e).attr("value",JSON.stringify(t)).trigger("change"),this.setting.set(t)},updateLetterSpacing:function(){var t=this.setting._value,e=this.container.find(".typography-hidden-value"),n={"letter-spacing":{}};this.container.find(".letter-spacing .control-wrap").each(function(){var t=jQuery(this).find("input").val(),e=jQuery(this).find("input").data("device");n["letter-spacing"][e]=t}),jQuery.extend(t,n),jQuery(e).attr("value",JSON.stringify(t)).trigger("change"),this.setting.set(t)}});